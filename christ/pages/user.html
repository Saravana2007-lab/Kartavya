<!DOCTYPE html>
<html>
<head>
  <title>User Login</title>
</head>
<body>

<h2>User Login</h2>

<div id="loginBox">
  <input id="name" placeholder="Full Name"><br><br>
  <input id="aadhaar" placeholder="Aadhaar Number"><br><br>
  <input id="phone" placeholder="Phone Number"><br><br>

  <button onclick="fakeLogin()">Login</button>
</div>

<hr>

<div id="dashboard" style="display:none;">
  <h3>Welcome! You are logged in âœ…</h3>
  <p id="userInfo"></p>
</div>

<script type="module">
import { db } from "../firebase.js";
import { doc, setDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

// Temporary UID generator using phone number
function generateUID(phone) {
  return "USER_" + phone;
}

window.fakeLogin = async function () {
  const name = document.getElementById("name").value.trim();
  const aadhaar = document.getElementById("aadhaar").value.trim();
  const phone = document.getElementById("phone").value.trim();

  if (!name || !aadhaar || !phone) {
    alert("Fill all fields");
    return;
  }

  const uid = generateUID(phone);

  await setDoc(doc(db, "users", uid), {
    name,
    aadhaar,
    phone,
    createdAt: new Date()
  });

  // Show dashboard
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("dashboard").style.display = "block";
  document.getElementById("userInfo").innerText =
    `Name: ${name} | Phone: ${phone}`;
};
</script>

</body>
</html>


